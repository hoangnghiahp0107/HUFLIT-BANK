<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="img/logo.png" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nạp tiền HUFLIT BANK</title>
    <link rel="stylesheet" href="deposit.css" />
  </head>
  <body>
    <div class="container" role="main">
      <form action="/create-payment-link" method="post">
        <!-- <label for="excel-upload" class="file-upload-label">Upload Excel</label> -->
        <input
          type="file"
          id="excel-upload"
          name="excel-upload"
          accept=".xls,.xlsx"
        />
        <label for="price">Giá tiền</label>
        <div class="price-input">
          <input
            type="number"
            class="price"
            id="amount"
            name="amount"
            min="0"
            placeholder="Nhập giá tiền"
            required
          />
        </div>
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      const form = document.querySelector("form");

      form.addEventListener("submit", function (e) {
        e.preventDefault();


        const fraudulen = 1;
        if (fraudulen === 1) {
          Swal.fire({
            icon: "error",
            title: "Phát hiện gian lận",
            text: "Dữ liệu tải lên có dấu hiệu gian lận. Vui lòng kiểm tra lại.",
            confirmButtonColor: "#2352ff",
          });
        } else {
          form.submit();
        }
      });
    </script>
    <!-- <script>
      const form = document.getElementById("fraud-form");

      // Dữ liệu nhập thủ công (ẩn trong script)
      const transactionData = {
        V1: -1.3598071336738,
        V2: -0.0727811733098497,
        V3: 2.53634673796914,
        V4: 1.37815522427443,
        V5: -0.338320769942518,
        V6: 0.462387777762292,
        V7: 0.239598554061257,
        V8: 0.0986979012610507,
        V9: 0.363786969611213,
        V10: 0.0907941719789316,
        V11: -0.551599533260813,
        V12: -0.617800855762348,
        V13: -0.991389847235408,
        V14: -0.311169353699879,
        V15: 1.46817697209427,
        V16: -0.470400525259478,
        V17: 0.207971241929242,
        V18: 0.0257905801985591,
        V19: 0.403992960255733,
        V20: 0.251412098239705,
        V21: -0.018306777944153,
        V22: 0.277837575558899,
        V23: -0.110473910188767,
        V24: 0.0669280749146731,
        V25: 0.128539358273528,
        V26: -0.189114843888824,
        V27: 0.133558376740387,
        V28: -0.0210530534538215,
        Amount: 149.62,
      };

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        try {
          const response = await fetch(
            "http://localhost:8080/api/bank/fraud-detection",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(transactionData),
            }
          );

          const result = await response.json();

          if (result.Class === 1) {
            Swal.fire({
              icon: "error",
              title: "Phát hiện gian lận",
              text: "Dữ liệu có dấu hiệu gian lận. Vui lòng kiểm tra lại.",
              confirmButtonColor: "#2352ff",
            });
          } else {
            form.submit();
          }
        } catch (error) {
          console.error("Lỗi gọi API:", error);
          Swal.fire({
            icon: "error",
            title: "Lỗi mạng",
            text: "Không thể gọi API. Vui lòng thử lại.",
            confirmButtonColor: "#2352ff",
          });
        }
      });
    </script> -->
  </body>
</html>
